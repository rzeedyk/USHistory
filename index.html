<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>American Revolution Adventure</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2 {
            color: #005a9c;
        }
        button {
            background-color: #005a9c;
            color: white;
            border: none;
            padding: 10px 15px;
            margin: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #003a6c;
        }
        #resource-display, #skills-display {
            background-color: #f0f0f0;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <h1>American Revolution Adventure</h1>
        
        <div id="resource-display">
            <p>Troops: <span id="troop-count">100</span> | 
               Supplies: <span id="supply-count">100</span> | 
               Funding: <span id="funding-count">100</span></p>
        </div>
        
        <div id="skills-display">
            <p>Diplomacy: <span id="diplomacy-skill">1</span> | 
               Military: <span id="military-skill">1</span> | 
               Espionage: <span id="espionage-skill">1</span></p>
        </div>

        <section id="start">
            <h2>Welcome to the American Revolution</h2>
            <p>You are about to embark on a journey through one of the most pivotal periods in American history. Your choices will shape the course of events. Are you ready to make history?</p>
            <button id="start-journey">Start your journey</button>
        </section>

        <section id="character_creation" style="display:none;">
            <h2>Create Your Character</h2>
            <p>Before you begin your adventure, choose your background:</p>
            <button id="choose-merchant">Merchant (Bonus: Funding)</button>
            <button id="choose-soldier">Former Soldier (Bonus: Troops)</button>
            <button id="choose-politician">Local Politician (Bonus: Diplomacy)</button>
        </section>

        <section id="boston_tea_party" style="display:none;">
            <h2>The Boston Tea Party</h2>
            <p>It's December 16, 1773. You find yourself in Boston Harbor, where tensions are high due to unfair taxation. A group of colonists are planning to dump British tea into the harbor as a form of protest.</p>
            <p>What do you choose to do?</p>
            <button id="join-tea-party">Join the Tea Party</button>
            <button id="warn-british">Warn the British</button>
            <button id="observe-secretly">Observe secretly and report to newspaper</button>
        </section>

        <section id="colonial_congress" style="display:none;">
            <h2>First Continental Congress</h2>
            <p>September 1774: Colonial leaders gather to discuss a unified response to British actions. Your reputation from the Tea Party incident precedes you.</p>
            <p>How will you contribute?</p>
            <button id="advocate-peace">Advocate for peaceful resolution</button>
            <button id="push-for-independence">Push for independence</button>
            <button id="propose-boycott">Propose a boycott of British goods</button>
        </section>

        <section id="paul_revere_ride" style="display:none;">
            <h2>Paul Revere's Midnight Ride</h2>
            <p>It's April 18, 1775. British troops are on the move, and you've got to warn Samuel Adams and John Hancock. You're basically the colonial version of a group text!</p>
            <p>How will you spread the word?</p>
            <button id="ride-horse">Ride your horse through town</button>
            <button id="use-lanterns">Use lantern signals from the church</button>
            <button id="send-messengers">Send multiple messengers on foot</button>
        </section>

        <!-- More sections... -->

        <section id="game_end" style="display:none;">
            <h2>The Birth of a Nation</h2>
            <p>Congratulations! You've made it through the American Revolution. Your choices have shaped the course of history.</p>
            <p>Final Score: <span id="final-score"></span></p>
            <p id="end-message"></p>
            <button id="play-again">Play Again</button>
        </section>
    </div>

    <script>
        let playerScore = 0;
        let resources = {
            troops: 100,
            supplies: 100,
            funding: 100
        };
        let skills = {
            diplomacy: 1,
            military: 1,
            espionage: 1
        };
        let playerBackground = '';

        function updateResources(troopChange, supplyChange, fundingChange) {
            resources.troops = Math.max(0, resources.troops + troopChange);
            resources.supplies = Math.max(0, resources.supplies + supplyChange);
            resources.funding = Math.max(0, resources.funding + fundingChange);
            
            document.getElementById('troop-count').textContent = resources.troops;
            document.getElementById('supply-count').textContent = resources.supplies;
            document.getElementById('funding-count').textContent = resources.funding;
        }

        function updateSkills(diplomacyChange, militaryChange, espionageChange) {
            skills.diplomacy = Math.max(1, skills.diplomacy + diplomacyChange);
            skills.military = Math.max(1, skills.military + militaryChange);
            skills.espionage = Math.max(1, skills.espionage + espionageChange);
            
            document.getElementById('diplomacy-skill').textContent = skills.diplomacy;
            document.getElementById('military-skill').textContent = skills.military;
            document.getElementById('espionage-skill').textContent = skills.espionage;
        }

        function choosePath(path) {
            console.log("choosePath called with path:", path);
            
            document.querySelectorAll('section').forEach(section => {
                section.style.display = 'none';
            });
            
            const pathActions = {
                'start_journey': { nextPath: 'character_creation', score: 0, resources: [0, 0, 0], skills: [0, 0, 0] },
                'choose_merchant': { nextPath: 'boston_tea_party', score: 0, resources: [0, 0, 50], skills: [1, 0, 0], message: "Your merchant background provides extra funding and diplomatic connections." },
                'choose_soldier': { nextPath: 'boston_tea_party', score: 0, resources: [50, 0, 0], skills: [0, 1, 0], message: "Your military experience grants you additional troops and tactical knowledge." },
                'choose_politician': { nextPath: 'boston_tea_party', score: 0, resources: [0, 0, 25], skills: [2, 0, 0], message: "Your political background enhances your diplomatic skills and provides some additional funding." },
                'join_tea_party': { nextPath: 'colonial_congress', score: 5, resources: [-10, 0, -20], skills: [0, 1, 0], message: "You've taken a bold stand against British taxation!", 
                                    condition: () => resources.troops >= 10 && resources.funding >= 20 },
                'warn_british': { nextPath: 'colonial_congress', score: -3, resources: [0, 0, 10], skills: [1, 0, 0], message: "Your loyalist actions may have consequences..." },
                'observe_secretly': { nextPath: 'colonial_congress', score: 2, resources: [0, 0, 5], skills: [0, 0, 1], message: "You've documented an important historical event!" },
                'advocate_peace': { nextPath: 'paul_revere_ride', score: 2, resources: [10, 10, 10], skills: [1, 0, 0], message: "Your peaceful approach gains support from moderates." },
                'push_for_independence': { nextPath: 'paul_revere_ride', score: 5, resources: [-10, -10, -10], skills: [0, 1, 0], message: "Your bold stance rallies patriots but depletes resources." },
                'propose_boycott': { nextPath: 'paul_revere_ride', score: 3, resources: [0, -20, 20], skills: [1, 0, 1], message: "The boycott strains supplies but increases funding and support." },
                // ... more paths ...
            };
            
            if (pathActions[path]) {
                const action = pathActions[path];
                if (action.condition && !action.condition()) {
                    alert("You don't have enough resources for this action!");
                    return;
                }
                playerScore += action.score;
                updateResources(...action.resources);
                updateSkills(...action.skills);
                if (action.message) {
                    alert(action.message + "\nYour current score: " + playerScore);
                }
                const targetSection = document.getElementById(action.nextPath);
                if (targetSection) {
                    targetSection.style.display = 'block';
                    if (action.nextPath === 'game_end') {
                        endGame();
                    }
                } else {
                    console.error("Could not find section with id:", action.nextPath);
                }
            }
        }

        function endGame() {
            document.getElementById('final-score').textContent = playerScore;
            let endMessage = "";
            if (playerScore >= 50) {
                endMessage = "Incredible! You're a true founding father of the nation!";
            } else if (playerScore >= 40) {
                endMessage = "Well done! Your actions have significantly shaped the revolution!";
            } else if (playerScore >= 30) {
                endMessage = "Good job! You've made a positive impact on the revolutionary cause.";
            } else {
                endMessage = "You've survived the revolution, but your impact was limited.";
            }
            document.getElementById('end-message').textContent = endMessage;
        }

        document.addEventListener('DOMContentLoaded', function() {
            const buttons = document.querySelectorAll('button');
            buttons.forEach(button => {
                button.addEventListener('click', function() {
                    const path = this.id.replace(/-/g, '_');
                    console.log("Button clicked, path:", path);
                    if (path === 'play_again') {
                        location.reload();
                    } else {
                        choosePath(path);
                    }
                });
            });
        });
    </script>
</body>
</html>
